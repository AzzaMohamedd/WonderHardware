@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@*user*@

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Icon-->
    <link type="image/x-icon" href="~/img/favicon.ico" rel="icon" />
    <title>@ViewData["Title"] - WonderHardware</title>

    <!-- Google font -->
    @*<link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat&family=Poppins&display=swap" rel="stylesheet">*@
    <link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/googlefonts.css" rel="stylesheet" />

    <!-- Bootstrap -->
    <link type="text/css" rel="stylesheet" href="~/css/bootstrap.min.css" />
    @*<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">*@

    <!-- comment animate -->
    <link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/animate.css-4.1.1/animate.min.css" rel="stylesheet" />

    <!-- Slick -->
    <link type="text/css" rel="stylesheet" href="~/css/slick.css" />
    <link type="text/css" rel="stylesheet" href="~/css/slick-theme.css" />

    <!-- nouislider -->
    <link type="text/css" rel="stylesheet" href="~/css/nouislider.min.css" />

    <!-- Font Awesome Icon -->
    <link rel="stylesheet" href="~/css/font-awesome.min.css">

    <!-- Custom stlylesheet -->
    <link type="text/css" rel="stylesheet" href="~/css/style.css" />
    <!--<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>--> @*مهم*@
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/sweetalert.js"></script>
    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.css" rel="stylesheet" />--> @*مهم*@
    @*<link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/sweetalert.css" rel="stylesheet" />*@

    @*<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet">*@
    <link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/toastr.min.css" rel="stylesheet" />
    <style>
        #toast-container > .toast-custom {
            content: "\f004";
        }

        .toast-custom {
            background-color: #760216;
        }
        #myBtn {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 30px;
  z-index: 99;
  font-size: 18px;
  border: none;
  outline: none;
  background-color: red;
  color: white;
  cursor: pointer;
  padding: 10px;
  border-radius: 4px;
}


    </style>
</head>

<body>
    <!-- HEADER -->
    <header>
        <!-- TOP HEADER -->
        <div id="top-header">
            <div class="container">
                <ul class="header-links pull-left">
                    <li><a href="#"><i class="fa fa-phone"></i> +201013955350</a></li>
                    <li><a href="#"><i class="fa fa-envelope-o"></i> WonderHardware4@gmail.com</a></li>
                    <li><a href="#"><i class="fa fa-map-marker"></i>شارع الجلاء بجوار البنك الاهلي</a></li>
                </ul>
                <ul class="header-links pull-right">

                    <li id="SignRegister" style="display:none"><a href="/Home/Login_Register?Wishlist=Index"><i class="fa fa-sign-in"></i> SignIn / Register</a></li>
                    <li id="UserName" style="display:none">
                        <a>
                            <i class="fa fa-user-o"></i>
                            @HttpContextAccessor.HttpContext.Session.GetString("UserName")
                            <span id="name"></span>
                        </a>
                        &nbsp;
                        |
                    </li>

                    &nbsp;

                    <li id="LogOut" style="display: none"><a id="logouthref" href="/Home/LogOut?UserID=@HttpContextAccessor.HttpContext.Session.GetInt32("UserID")"><i class="fa fa-sign-out"></i> LogOut </a></li>


                </ul>
            </div>
        </div>
        <!-- /TOP HEADER -->
        <!-- MAIN HEADER -->
        <div id="header">
            <!-- container -->
            <div class="container">
                <!-- row -->
                <div class="row">
                    <!-- LOGO -->
                    <div class="col-md-3">
                        <div class="header-logo">
                            <a asp-area="" asp-controller="Home" asp-action="Index" class="logo">
                                <img src="~/img/Index/logo.png" alt="" style="margin-top:5px" class="img-responsive">
                            </a>
                        </div>
                    </div>
                    <!-- /LOGO -->
                    <!-- SEARCH BAR -->
                    <div class="col-md-6">
                        <div class="header-search">
                            <form>
                                <select id="selectval" class="input-select">
                                    <option value="0">All Categories</option>
                                    <option value="1">MotherBoard</option>
                                    <option value="2">Processor</option>
                                    <option value="3">Ram</option>
                                    <option value="4">SSD</option>
                                    <option value="5">HDD</option>
                                    <option value="6">Case</option>
                                    <option value="7">Power Supply</option>
                                    <option value="8">VGA</option>
                                </select>
                                <input autocomplete="off" id="txtsearch" class="input" placeholder="Search here">
                                <ul id="searchitems" class="dropdown-menu" style="display: none; width: calc(100% - 256px); margin-left: 150px; "></ul>
                                <button id="btnsearch" class="search-btn">Search</button>
                            </form>
                        </div>
                    </div>
                    <!-- /SEARCH BAR -->
                    <!-- ACCOUNT -->
                    <div class="col-md-3 clearfix" style="display: contents;">
                        <div class="header-ctn">
                            <!-- Chat -->
                            <div>
                                <a href="#" onclick="location.href='@Url.Action("Chat")'">
                                    <i class="fa fa-envelope"></i>
                                    <span>Contact Us</span>

                                    <div hidden="hidden" class="qty" id="MessagesCounterr"></div>

                                </a>
                            </div>
                            <!-- /Chat -->
                            <!-- Wishlist -->
                            <div>
                                <a href="#" onclick="location.href='@Url.Action("WishList")'">
                                    <i class="fa fa-heart-o"></i>
                                    <span>Your Wishlist</span>
                                    <div id="wishlistCounter"></div>
                                </a>
                            </div>
                            <!-- /Wishlist -->
                            <!-- Cart -->
                            <div class="dropdown">
                                <a href="#" onclick="location.href='@Url.Action("Cart")'" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
                                    <i class="fa fa-shopping-cart"></i>
                                    <span>Your Cart</span>
                                    <div class="qty" id="Counter">0</div>
                                </a>
                                @*<div class="cart-dropdown">
                                        <div class="cart-list">
                                            <div class="product-widget">
                                                <div class="product-img">
                                                    <img src="~/img/product01.png" alt="">
                                                </div>
                                                <div class="product-body">
                                                    <h3 class="product-name"><a href="#">product name goes here</a></h3>
                                                    <h4 class="product-price"><span class="qty">1x</span>$980.00</h4>
                                                </div>
                                                <button class="delete"><i class="fa fa-close"></i></button>
                                            </div>

                                            <div class="product-widget">
                                                <div class="product-img">
                                                    <img src="~/img/product02.png" alt="">
                                                </div>
                                                <div class="product-body">
                                                    <h3 class="product-name"><a href="#">product name goes here</a></h3>
                                                    <h4 class="product-price"><span class="qty">3x</span>$980.00</h4>
                                                </div>
                                                <button class="delete"><i class="fa fa-close"></i></button>
                                            </div>
                                        </div>
                                        <div class="cart-summary">
                                            <small>3 Item(s) selected</small>
                                            <h5>SUBTOTAL: $2940.00</h5>
                                        </div>
                                        <div class="cart-btns">
                                            <a href="#">View Cart</a>
                                            <a href="#">Checkout  <i class="fa fa-arrow-circle-right"></i></a>
                                        </div>
                                    </div>*@
                            </div>
                            <!-- /Cart -->
                            <!-- Menu Toogle -->
                            <div class="menu-toggle">
                                <a href="#">
                                    <i class="fa fa-bars"></i>
                                    <span>Menu</span>
                                </a>
                            </div>
                            <!-- /Menu Toogle -->
                        </div>
                    </div>
                    <!-- /ACCOUNT -->
                </div>
                <!-- row -->
            </div>
            <!-- container -->
        </div>
        <!-- /MAIN HEADER -->
    </header>
    <!-- /HEADER -->
    <!-- NAVIGATION -->
    <nav id="navigation">
        <!-- container -->
        <div class="container">
            <!-- responsive-nav -->
            <div id="responsive-nav">
                <!-- NAV -->
                <ul class="main-nav nav navbar-nav" id="products">
                    <li><a asp-area="" asp-controller="Home" asp-action="Index">Home</a></li>
                    <li><a asp-area="" asp-controller="Home" asp-action="Motherboard">Motherboard</a></li>
                    <li><a asp-area="" asp-controller="Home" asp-action="Processor" id="pro">Processor</a></li>
                    <li><a asp-area="" asp-controller="Home" asp-action="HDD">Hdd</a></li>
                    <li><a asp-area="" asp-controller="Home" asp-action="RAM">Ram</a></li>
                    <li><a asp-area="" asp-controller="Home" asp-action="GraphicsCard">Graphics Card</a></li>
                    <li><a asp-area="" asp-controller="Home" asp-action="SSD">SSD</a></li>
                    <li><a asp-area="" asp-controller="Home" asp-action="PowerSuply">Power Supply</a></li>
                    <li><a asp-area="" asp-controller="Home" asp-action="Case">Case</a></li>
                </ul>
                <!-- /NAV -->
            </div>
            <!-- /responsive-nav -->
        </div>
        <!-- /container -->
    </nav>
    <!-- /NAVIGATION -->
    @RenderBody()
    <!-- FOOTER -->
    <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">terms & conditions</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

                    Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

                    Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

                    Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

                    Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

                    Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

                    Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

                    Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

                    Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

                    Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

                    Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

                    Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

                    Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

                    Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

                    Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.

                    Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.

                    Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.

                    Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <footer id="footer">

        <div class="section">
            <!-- container -->
            <div class="container">
                <!-- row -->
                <div class="row">
                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">About Us</h3>

                            <ul class="footer-links">
                                <li><a href="#"><i class="fa fa-map-marker"></i>شارع الجلاء بجوار البنك الاهلي</a></li>
                                <li><a href="#"><i class="fa fa-phone"></i>+201013955350</a></li>
                                <li><a href="#"><i class="fa fa-envelope-o"></i>WonderHardware4@gmail.com</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="clearfix visible-xs"></div>

                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Information</h3>
                            <ul class="footer-links">
                                <li><a href="#">About Us</a></li>
                                <li><a href="/Home/Chat">Contact Us</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                                <li><a href="#">Orders and Returns</a></li>
                                <li><a href="#" data-toggle="modal" data-target="#exampleModalLong">Terms & Conditions</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-md-3 col-xs-6">
                        <div class="footer">
                            <h3 class="footer-title">Service</h3>
                            <ul class="footer-links">
                                <li><a href="/Home/Cart">View Cart</a></li>
                                <li><a href="/Home/WishList">Wishlist</a></li>
                                <li><a href="/Home/CheckOut">Track My Order</a></li>
                                <li><a href="#">Help</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- /row -->
            </div>
            <!-- /container -->
        </div>
    </footer>
    <div onclick="Up()" id="myBtn" title="Go to top">UP</div>
    <!-- /FOOTER -->
    <!-- jQuery Plugins -->
    <script src="~/js/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/jquery.min.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/slick.min.js"></script>
    <script src="~/js/nouislider.min.js"></script>
    <script src="~/js/jquery.zoom.min.js"></script>
    <script src="~/js/main.js"></script>
    <script src="~/js/Wonder.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/toastr.min.js"></script>

    @if (IsSectionDefined("Services"))
    {
        { await RenderSectionAsync("Services", true); }

    }
    else
    {
        {
            await RenderSectionAsync("Services", false);
        }
    }
    <style>
    </style>
  
</body>
</html>  
<script>
    //Get the button
var mybutton = document.getElementById("myBtn");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function Up() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
        var userID=@HttpContextAccessor.HttpContext.Session.GetInt32("UserID").GetValueOrDefault();
        "use strict";
        var connection = new signalR.HubConnectionBuilder().withUrl("/chatHub").build();

        $(document).ready(function () {
            var WishList = $("#wishlist").val();
            cartconnection();
            wishlistconnection();
            GetMessagesCounterinuser("");

            $('#txtsearch').keyup(function () {
                var Number = $('#selectval').val();
                var Search = $('#txtsearch').val();
                $('#searchitems').css("display", "none");
                if (Search == "") {
                    //لو كتبت ومسحت هتبقا فاضيه
                    $('#searchitems').css("display", "none");
                }
                else {
                    var html = '';
                    var i = 0;
                    $.ajax({
                        url: "/Home/Search?src=" + Search + "&num=" + Number,
                        type: "GET",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            $.each(result, function (key, item) {
                                if (i < 10) {
                                    html += '<li class="text-truncate"><a href="javascript:gotoDetails(' + "'" + item.productCode + "'" + ')">' + item.productName + '</a></li>';
                                    i++;
                                }
                                else {
                                    html += '<li style="text-align:center;"><a style="background: none;border: none;" href="javascript:GetAllSearch(' + Number + ',';
                                    html += "'"+Search+"')";
                                    html += '">+' + (result.length - 10) + '</a></li> ';
                                    //عايزه اخرج من الإيتش
                                    return false;
                                }

                            });
                            if (result.length == 0) {
                                //لو جايه بداتا فاضيه (ملقتش نتايج مطلوبه).ء
                                html += '<li style="text-align:center;">No Results</li>';
                            }

                            $('#searchitems').html(html).css("display", "block");
                        }
                    });
                }
            });

            $(document).on('click', function (e) {
                //to hide search results Box after clicking outside(SearchBox Or ResultsBox)
                var container1 = $("#searchitems");
                var container2 = $("#txtsearch");
                if (!($(e.target).closest(container1).length || $(e.target).closest(container2).length)) {
                    container1.hide();
                }
                //To Clear Popup Inputs when Popup disappeared
                if (!$('#LoginRegister').hasClass('in')) {
                    $('#telephone1').val(""); $('#password1').val(""); $('#fname').val(""); $('#lname').val("");
                    $('#telephone2').val(""); $('#password2').val(""); $('#password3').val(""); $('#validphone11').hide();
                    $('#validphone12').hide(); $('#validphone13').hide(); $('#validphone14').hide(); $('#validpassword12').hide();
                    $('#validpassword11').hide(); $('#validfname').hide(); $('#invalidfname').hide(); $('#validlname').hide();
                    $('#invalidlname').hide(); $('#validphone21').hide(); $('#validphone22').hide(); $('#validphone23').hide();
                    $('#validphone24').hide(); $('#validpassword21').hide(); $('#invalidpassword').hide(); $('#validpassword22').hide();
                    $('#validpassword23').hide();
                    displybtnregister();
                    if ($('#btnLogin').hasClass("btn login disabled")) {
                        //البوبب
                        $('#btnLogin').removeClass('btn login disabled').addClass('btn login');
                    }
                    else if ($('#btnLogin').hasClass("primary-btn btn-block order-submit disabled")) {
                        //صفحه اللوجن الاساسيه
                        $('#btnLogin').removeClass('primary-btn btn-block order-submit disabled').addClass('primary-btn btn-block order-submit').css('background-color', '');
                    }
                }
            });

            $("#btnsearch").click(function () {
                var Number = $('#selectval').val();
                var Search = $('#txtsearch').val();
                //window.location.href = "/Home/Search?src=" + Search + "&num=" + Number + "&txt='ButtonOrBlus'";
                GetAllSearch(Number, Search);
            });


            //login&register

            $('#telephone1').keyup(function () {
                $('#validphone11').hide();
                $('#validphone12').hide();
                $('#validphone13').hide();
                $('#validphone14').hide();
                if ($('#btnLogin').hasClass("btn login disabled")) {
                    //البوبب
                    $('#btnLogin').removeClass('btn login disabled').addClass('btn login');
                }
                else if ($('#btnLogin').hasClass("primary-btn btn-block order-submit disabled")) {
                    //صفحه اللوجن الاساسيه
                    $('#btnLogin').removeClass('primary-btn btn-block order-submit disabled').addClass('primary-btn btn-block order-submit').css('background-color', '');
                }
                var telephone1 = $('#telephone1').val();
                if (jQuery.isNumeric(telephone1) != true && telephone1 != "") {
                    $('#validphone13').show();
                    if ($('#btnLogin').hasClass("btn login")) {
                        //البوبب
                        $('#btnLogin').addClass('disabled');
                    }
                    else if ($('#btnLogin').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnLogin').css('background-color', 'grey').addClass('disabled');
                    }
                }
                else if (telephone1.length > 11) {
                    $('#validphone14').show();
                    if ($('#btnLogin').hasClass("btn login")) {
                        //البوبب
                        $('#btnLogin').addClass('disabled');
                    }
                    else if ($('#btnLogin').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnLogin').css('background-color', 'grey').addClass('disabled');
                    }
                }
            });
            $('#password1').keyup(function () {
                $('#validpassword12').hide();
                $('#validpassword11').hide();
                if ($('#btnLogin').hasClass("btn login disabled")) {
                    //البوبب
                    $('#btnLogin').removeClass('btn login disabled').addClass('btn login');
                }
                else if ($('#btnLogin').hasClass("primary-btn btn-block order-submit disabled")) {
                    //صفحه اللوجن الاساسيه
                    $('#btnLogin').removeClass('primary-btn btn-block order-submit disabled').addClass('primary-btn btn-block order-submit').css('background-color', '');
                }
            });

            $('#btnLogin').click(function () {
                var telephone1 = $('#telephone1').val();
                var password1 = $('#password1').val();
                if (telephone1 == "" || telephone1 == undefined || telephone1.length != 11 || password1 == "" || password1 == undefined) {
                    if ($('#btnLogin').hasClass("btn login")) {
                        //البوبب
                        $('#btnLogin').addClass('disabled');
                    }
                    else if ($('#btnLogin').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnLogin').css('background-color', 'grey').addClass('disabled');
                    }
                    if (telephone1 == "" || telephone1 == undefined) {
                        $('#validphone11').show();
                    }
                    else if (telephone1.length != 11) {
                        $('#validphone14').show();
                    }
                    if (password1 == "" || password1 == undefined) {
                        $('#validpassword11').show();
                    }
                }
                else {
                    $.ajax({
                        url: "/Home/Login?Password=" + password1 +
                            "&Telephone=" + telephone1 + "&WishList=" + WishList,
                        type: "GET",
                        contentType: "application/json;charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            if (result["page"] == "this phone isn't exist") {
                                $('#validphone12').show();
                            }
                            else if (result["page"] == "wrong password") {
                                $('#validpassword12').show();
                            }
                            else {
                                GoTo(result)
                            }
                        }
                    });
                }

            });

            $('#fname').keyup(function () {
                $('#validfname').hide();
                var fname = $('#fname').val();
                if (($.trim(fname) == "" && fname != "") || fname.includes("  ") || /\d/.test(fname)) {
                    $('#invalidfname').show();
                    if ($('#btnRegist').hasClass("btn login")) {
                        //البوبب
                        $('#btnRegist').addClass('disabled');
                    }
                    else if ($('#btnRegist').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnRegist').css('background-color', 'grey').addClass('disabled');
                    }
                }
                else {
                    $('#invalidfname').hide();
                    displybtnregister();
                }
            });

            $('#lname').keyup(function () {
                $('#validlname').hide();
                var lname = $('#lname').val();
                if (($.trim(lname) == "" && lname != "") || lname.includes("  ") || /\d/.test(lname)) {
                    $('#invalidlname').show();
                    if ($('#btnRegist').hasClass("btn login")) {
                        //البوبب
                        $('#btnRegist').addClass('disabled');
                    }
                    else if ($('#btnRegist').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnRegist').css('background-color', 'grey').addClass('disabled');
                    }
                }
                else {
                    $('#invalidlname').hide();
                    displybtnregister();
                }
            });

            $('#telephone2').keyup(function () {
                $('#validphone21').hide();
                $('#validphone22').hide();
                $('#validphone23').hide();
                $('#validphone24').hide();
                displybtnregister();
                var telephone2 = $('#telephone2').val();
                if (jQuery.isNumeric(telephone2) != true && telephone2 != "") {
                    $('#validphone23').show();
                    if ($('#btnRegist').hasClass("btn login")) {
                        //البوبب
                        $('#btnRegist').addClass('disabled');
                    }
                    else if ($('#btnRegist').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnRegist').css('background-color', 'grey').addClass('disabled');
                    }                }
                else if (telephone2.length > 11) {
                    $('#validphone24').show();
                    if ($('#btnRegist').hasClass("btn login")) {
                        //البوبب
                        $('#btnRegist').addClass('disabled');
                    }
                    else if ($('#btnRegist').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnRegist').css('background-color', 'grey').addClass('disabled');
                    }
                }
            });

            $('#password2').keyup(function () {
                $('#validpassword21').hide();
                var password2 = $('#password2').val();
                var password3 = $('#password3').val();
                if ($.trim(password2) == "" && password2 != "") {
                    $('#invalidpassword').show();
                    if ($('#btnRegist').hasClass("btn login")) {
                        //البوبب
                        $('#btnRegist').addClass('disabled');
                    }
                    else if ($('#btnRegist').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnRegist').css('background-color', 'grey').addClass('disabled');
                    }
                }
                else {
                    $('#invalidpassword').hide();
                    displybtnregister();
                }
                if (password2 != password3 && password3 != "") {
                     $('#validpassword23').show();
                    if ($('#btnRegist').hasClass("btn login")) {
                        //البوبب
                        $('#btnRegist').addClass('disabled');
                    }
                    else if ($('#btnRegist').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnRegist').css('background-color', 'grey').addClass('disabled');
                    }
                }
                else {
                    $('#validpassword23').hide();
                    displybtnregister();
                }
            });

            $('#password3').keyup(function () {
                $('#validpassword22').hide();
                var password2 = $('#password2').val();
                var password3 = $('#password3').val();
                if (password2 != password3 && password2 != "") {
                    $('#validpassword23').show();
                    if ($('#btnRegist').hasClass("btn login")) {
                        //البوبب
                        $('#btnRegist').addClass('disabled');
                    }
                    else if ($('#btnRegist').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnRegist').css('background-color', 'grey').addClass('disabled');
                    }
                }
                else {
                    $('#validpassword23').hide();
                    displybtnregister();
                }
            });

            $('#btnRegist').click(function () {
                var fname = $.trim($('#fname').val());
                var lname = $.trim($('#lname').val());
                var telephone2 = $('#telephone2').val();
                var password2 = $('#password2').val();
                var password3 = $('#password3').val();

                if (fname == "" || fname == undefined || lname == "" || lname == undefined || telephone2 == "" || telephone2 == undefined || telephone2.length != 11 || password2 == "" || password2 == undefined || password2 != password3) {
                    if ($('#btnRegist').hasClass("btn login")) {
                        //البوبب
                        $('#btnRegist').addClass('disabled');
                    }
                    else if ($('#btnRegist').hasClass('primary-btn btn-block order-submit')) {
                        //صفحه اللوجن الاساسيه
                        $('#btnRegist').css('background-color', 'grey').addClass('disabled');
                    }
                    if (fname == "" || fname == undefined) {
                        $('#validfname').show();
                    }
                    if (lname == "" || lname == undefined) {
                        $('#validlname').show();
                    }
                    if (telephone2 == "" || telephone2 == undefined) {
                        $('#validphone21').show();
                    }
                    else if (telephone2.length != 11) {
                        $('#validphone24').show();
                    }
                    if (password2 == "" || password2 == undefined) {
                        $('#validpassword21').show();
                    }
                    if (password3 == "" || password3 == undefined) {
                        $('#validpassword22').show();
                    }
                }
                // لازم نوقف لو ف اي حاجه بترو من اللي فوق
                else {
                    $.ajax({
                        url: "/Home/Register?FName=" + fname +
                            "&LName=" + lname +
                            "&Telephone=" + telephone2 +
                            "&Password=" + password2 + "&WishList=" + WishList,
                        type: "GET",
                        contentType: "application/json;charset=utf-8",
                        dataType: "json",
                        success: function (result) {
                            if (result["page"] == "this phone is already exist") {
                                $('#validphone22').show();
                            }
                            else {
                                GoTo(result);
                            }
                        }
                    });
                }

            });
        });
        function displybtnregister() {
            if ($('#validphone21').is(':hidden') && $('#validphone22').is(':hidden') && $('#validphone23').is(':hidden') && $('#validphone24').is(':hidden')
                && $('#validpassword21').is(':hidden') && $('#validpassword22').is(':hidden') && $('#validpassword23').is(':hidden')
                && $('#invalidfname').is(':hidden') && $('#validfname').is(':hidden') && $('#invalidlname').is(':hidden') && $('#validlname').is(':hidden')) {

                if ($('#btnRegist').hasClass("btn login disabled")) {
                    //البوبب
                    $('#btnRegist').removeClass('btn login disabled').addClass('btn login');
                }
                else if ($('#btnRegist').hasClass('primary-btn btn-block order-submit disabled')) {
                    //صفحه اللوجن الاساسيه
                    $('#btnRegist').removeClass('primary-btn btn-block order-submit disabled').addClass('primary-btn btn-block order-submit').css('background-color', '');
                }
            }
        }

        function GoTo(result) {
            if (result["page"] == "WishList") {
                window.location = "/Home/WishList";
            }
            else if (result["page"] == "Chat") {
                window.location = "/Home/Chat";
            }
            else if (result["page"] == "Index") {
                window.location = "/Home/Index";
            }
            else {
                $('#close').click();
                $("#SignRegister").css("display", "none");
                $("#UserName").css("display", "contents");
                $('#name').text(result["name"]);
                $("#LogOut").css("display", "contents");
                $("#logouthref").attr('href','/Home/LogOut?UserID=@HttpContextAccessor.HttpContext.Session.GetInt32("UserID")')
                wishlistconnection();
                GetMessagesCounterinuser("");
            }
        }

        //end login&register

        connection.start().then(function () {
        }).catch(function (arr) {
            return console.error(arr.toString());
        });

        connection.on("ReceiveMessage", function (message, txt, senderid, userid, dictionaryDandT) {

            if (txt == "My text as admin" && userID == userid) {
                GetMessagesCounterinuser("from receive");
            }

        });

        function GetMessagesCounterinuser(txt) {
            $.ajax({
                type: "GET",
                url: "/Home/GetMessagesCounter?userid=" + userID,
                dataType: "json",
                success: function (result) {
                    //اول ما الصفحه تلود في اي وقت--> من غير ما يتبعت رساله
                    $('#MessagesCounterr').html(result).removeAttr('hidden');
                    if (result == 0) {
                        //اول ما الصفحه تلود لو مفيش ماسدجات مش متشافه هيخفي الدايره بالرقم
                        $('#MessagesCounterr').attr('hidden', 'hidden');
                    }
                    if (txt == "from receive") {
                        //اكون جايه من الاستدعاء في الريسيف --> يعني الرساله لسه مبعوته
                        toastr.info('you have new message', '', { timeOut: 7000, positionClass: "toast-bottom-right", progressBar: true, iconClass: "toast-custom" });
                    }
                }
            });

        }
        function cartconnection() {
            let s = getItemStorage("Cart") || [];
            var arr = [];
            var notificationcount = 0;
            $.ajax({
                type: "GET",
                url: "/Home/GetAvailableProducts",
                dataType: "json",
                success: function (result) {
                    $.each(result, function (key, item) {
                        arr[key] = item;
                    });
                    $.each(s, function (key, item) {
                        if (arr[item.Code].isAvailable == "Not Available") {
                            notificationcount++;
                        }
                    });
                    var Counter = s.length - notificationcount;
                    $('#Counter').html(Counter);
                }
            });
        }
        function wishlistconnection() {
            if ((@HttpContextAccessor.HttpContext.Session.GetInt32("UserID").GetValueOrDefault()) != 0)
            {
                $("#UserName").css("display", "contents");
                $("#LogOut").css("display", "contents");
                $.ajax({
                    url: "/Home/WishListCounter",
                    type: "GET",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (Counter) {
                        $('#wishlistCounter').addClass("qty");
                        $('#wishlistCounter').text(Counter);
                    }
                });
            }
            else{
                $("#SignRegister").css("display", "contents");
            }
        }

        function GetAllSearch(number, search) {
            $.ajax({
                url: "/Home/Search?src=" + search + "&num=" + number,
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    //جيت بالليست هروح ع الفيو اعرضها
                    window.location = "/Home/SearchPage?src=" + search + "&num=" + number;
                }
            });
        }
    </script>